 Michael Kremer

U45121665

Yibo Hu

U09751675

ENG EC463 A1
# 2020 Sensor Mini-Project Report

## Task 0: Set up Python Websockets
The greeting string issued by the server to the client upon first connecting is
```sh
$ ECE Senior Capstone IoT simulator
```
## Task 1: Data Flow
In order to write the data captured by ws_client.py, changes must be made to a function called by ws_client.py, client.py
Now calling ws_client.py with this flag and argument will write all JSON data to the text file, data.txt
```sh
$ python ws_client.py -l data.txt
```
## Task 2: Analysis
After logging the data from ws_client.py into data.txt, the data can be analyzed by calling:
```sh
$ python analyze.py data.txt
```
Please note that all of the data in the tables and graphs below is from the data.txt associated with this
[this](https://github.com/KremerMichael/2020-sensor-miniproject/blob/6372537ed613fa56e83726780b3addd828012b5c/Report.md)
commit. If any changes are made to data.txt the following values should be close but will not be exact matches
### 1) Median and Variance of Temperature
|                      | Office | Lab1 | Class1 |
|----------------------|-------:|-----:|-------:|
| Temperature Median   |  22.99 | 21.0 |  26.96 |
| Temperature Variance |  32.41 | 2.31 | 139.81 |
### 2) Median and Variance of Occupancy
|                    | Office | Lab1 | Class1 |
|--------------------|-------:|-----:|-------:|
| Median Occupancy   |    2.0 |  5.0 |   19.0 |
| Occupancy Variance |   1.94 | 5.28 |  19.89 |
### 3) Probability Distribution Function of Each Sensor
These three charts were generated by analyze.py and saved inside of this git repo for this report
![Image of PDist_co2](https://github.com/KremerMichael/2020-sensor-miniproject/blob/main/graphs/PDist_co2.png)
![Image of PDist_temp](https://github.com/KremerMichael/2020-sensor-miniproject/blob/main/graphs/PDist_temp.png)
![Image of PDist_occupancy](https://github.com/KremerMichael/2020-sensor-miniproject/blob/main/graphs/PDist_occupancy.png)
### 4) Mean, Variance, and Probability Distribution of Time-Interval Data
| Time inteval         | Office | Lab1 | Class1 |
|----------------------|-------:|-----:|-------:|
| Temperature Mean     |   2.89 | 2.87 |   2.99 |
| Temperature Variance |   7.43 | 9.33 |   8.41 |
| Occupancy Mean       |   2.89 | 2.87 |   2.99 |
| Occupancy Variance   |   7.43 | 9.33 |   8.41 |
| CO2 Mean             |   2.89 | 2.87 |   2.99 |
| CO2 Variance         |   7.43 | 9.33 |   8.41 |
![Image of PDist_time_co2](https://github.com/KremerMichael/2020-sensor-miniproject/blob/main/graphs/PDist_time_co2.png)
![Image of PDist_time_occupancy](https://github.com/KremerMichael/2020-sensor-miniproject/blob/main/graphs/PDist_time_occupancy.png)
![Image of PDist_time_temp](https://github.com/KremerMichael/2020-sensor-miniproject/blob/main/graphs/PDist_time_temp.png)
### WHATTTT
## Task 3: Design
After logging the data from ws_client.py into data.txt, the data can be scaned for anomalies in temperature by calling:
```sh
$ python analyze.py data.txt
```
### 1) Finding Anomalies and Reinterpretting Median and Variance
|                          | Office |  Lab1 | Class1 |
|--------------------------|-------:|------:|-------:|
| Anomalies                |  2.38% | 4.46% |  2.69% |
| Median (sans Anomalies)  |  22.99 |  21.0 |  26.98 |
| Variance (sans Anomalies |   0.82 |  0.12 |   1.35 |
### 2) Does a persistent change in temperature always indicate a failed sensor?
No, in the real world many things could cause a persisten change in temperature. Atypical weather, broken HVAC, or even seasonal climates 
can all have an effect on persistent changes in temperature.
### 3) What are possible bounds on temperature for each room type?
In my experience there is no bound on temperatures inside of classrooms, upper or lower. However labs are usually reliably temperature bound 
to the nature of their research. A biology lab may want warmly biased bounds to produce cell growth, an extreme precision electronics lab 
will want their temperature bounds to be cold to minimize signal drop accross wires, and a psychology lab may want perfect room temperature 
for experimental consistancy. Offices should be kept to whatever the people in the office agree upon.
## Task 4: Conclusions
### 1) how is this simulation reflective of the real world?
This simmulation is especially reflective of the real world because of CoronaVirus. As many companies try to promote healthy and safe 
workspaces, this data and modeling will be vital in the real world. In a fully sophisticated model, one could compare CO2 and temperature 
to the occupancy of a room and see if these values break out of safe bounds. Perhaps an invidual has a fever and the room temperature rises 
more than acceptable, or maybe the co2 levels rise more than expected because an occupant of the room is having respitory issues. I have 
little doubt we will begin to see implentations of the ideas and concepts in this model in the coming years.
### 2) how is this simulation deficient? What factors does it fail to account for?
The biggest factor this simmulation fails to account for is the sun. As the sun rises and sets: temperatures rise and fall, building 
occupancy goes up and down, and so does co2. The natural day-night cycle means the means, medians, and variances calculated in this project 
should actually be fluctuating. In the current implementation these values are generated from random data with no respect to a day-night 
cycle. Without capturing the natural drift of these values, our model is overly rigid and fixed.
### 3) how is the difficulty of initially using this Python websockets library as compared to a compiled language e.g. C++ websockets
C++ is incredible and I love it, but websockets usually involve dynamic ports, hosts, and connections. C++ is completely capable of scanning 
sysfiles for open connections and interupts as a device driver for any websocket, but sometimes it's easier to let Python do the work. As 
an interpreted language Python is usually easier to work with in these dynamic use-cases. Using Python websockets is much easier than C++ 
websockets.
### 4) would it be better to have the server poll the sensors, or the sensors reach out to the server when they have data?
It would be best to have the server poll the sensors. Assuming that the sensors poll at any reasonable timescale for occupancy, 
temperature, and co2 (think minutes), there is no need for the sensors to be constantly pushing data to the server. This results 
in busy data pipelines not controlled by a central authority. It is more likely that the sensors generate more data than the server 
could reasonably need than the sensors not generate sufficient data. In this hypothetical, the server should be the authoritative 
force and decide when to poll, store, and analyze any data captured by the sensors.
